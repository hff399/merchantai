(()=>{var e={};e.id=3814,e.ids=[3814],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},77828:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),t(86355),t(69256),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["outreach",{children:["accounts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,86355)),"/Users/leomishin/merchantai/admin/app/outreach/accounts/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,69256)),"/Users/leomishin/merchantai/admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/leomishin/merchantai/admin/app/outreach/accounts/page.tsx"],x="/outreach/accounts/page",h={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/outreach/accounts/page",pathname:"/outreach/accounts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},45906:(e,s,t)=>{Promise.resolve().then(t.bind(t,45402))},20791:(e,s,t)=>{Promise.resolve().then(t.bind(t,8633)),Promise.resolve().then(t.bind(t,40381))},62460:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},45402:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var a=t(10326),r=t(17577),l=t(40381),i=t(76557);let n=(0,i.Z)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),c=(0,i.Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var d=t(48998);let o=(0,i.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),x=(0,i.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),h=(0,i.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var m=t(25696),p=t(79256),u=t(12969),g=t(21405),y=t(83855),b=t(83495),j=t(32933),f=t(75290),v=t(7027),N=t(231),w=t(43810),k=t(98091);let Z=(0,i.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var _=t(12714);let P=(0,i.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),C={connected:{label:"Подключён",icon:n,color:"text-green-600",bgColor:"bg-green-100"},disconnected:{label:"Отключён",icon:c,color:"text-gray-600",bgColor:"bg-gray-100"},pending_verification:{label:"Ожидает верификации",icon:d.Z,color:"text-yellow-600",bgColor:"bg-yellow-100"},awaiting_code:{label:"Введите код",icon:o,color:"text-blue-600",bgColor:"bg-blue-100"},awaiting_2fa:{label:"Требуется 2FA",icon:x,color:"text-purple-600",bgColor:"bg-purple-100"},banned:{label:"Заблокирован",icon:h,color:"text-red-600",bgColor:"bg-red-100"},limited:{label:"Ограничен",icon:h,color:"text-orange-600",bgColor:"bg-orange-100"}};function M({used:e,limit:s}){let t=Math.min(e/s*100,100);return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,a.jsxs)("span",{children:[e," / ",s]}),(0,a.jsxs)("span",{children:[t.toFixed(0),"%"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${t>=90?"bg-red-500":t>=70?"bg-yellow-500":"bg-green-500"} transition-all duration-300`,style:{width:`${t}%`}})})]})}function S(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(0),[c,o]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null),[S,A]=(0,r.useState)(""),[T,I]=(0,r.useState)("created_at"),[q,$]=(0,r.useState)("desc"),[D,F]=(0,r.useState)(1),[O,z]=(0,r.useState)(!1),[U,E]=(0,r.useState)(null),[L,V]=(0,r.useState)(null),[R,H]=(0,r.useState)(null),[J,W]=(0,r.useState)({phone:"",api_id:"",api_hash:"",name:"",daily_limit:"40"}),[G,B]=(0,r.useState)(""),[K,Q]=(0,r.useState)(""),[X,Y]=(0,r.useState)("add"),ee=(0,r.useCallback)(async()=>{o(!0);let e=new URLSearchParams;S&&e.set("status",S),e.set("sort",T),e.set("order",q),e.set("page",String(D));try{let t=await fetch(`/api/outreach/accounts/list?${e.toString()}`),a=await t.json();s(a.accounts||[]),i(a.total||0)}catch(e){console.error("Failed to fetch accounts:",e),l.ZP.error("Не удалось загрузить аккаунты")}o(!1)},[S,T,q,D]),es=e=>{T===e?$("desc"===q?"asc":"desc"):(I(e),$("desc"))},et=()=>{W({phone:"",api_id:"",api_hash:"",name:"",daily_limit:"40"}),B(""),Q(""),Y("add")},ea=async()=>{if(!J.phone||!J.api_id||!J.api_hash){l.ZP.error("Заполните обязательные поля");return}if(!J.phone.startsWith("+")){l.ZP.error("Номер должен начинаться с + (например, +79001234567)");return}if(!/^\d+$/.test(J.api_id.trim())){l.ZP.error("API ID должен содержать только цифры");return}h("add");try{let e=await fetch("/api/outreach/accounts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:J.phone.trim(),api_id:J.api_id.trim(),api_hash:J.api_hash.trim(),name:J.name||null,daily_limit:parseInt(J.daily_limit)||40})}),s=await e.json();e.ok&&s.account?(l.ZP.success("Аккаунт добавлен"),ee(),E(s.account),z(!1),await er(s.account.id)):l.ZP.error(s.error||"Ошибка добавления")}catch(e){l.ZP.error("Ошибка соединения")}finally{h(null)}},er=async e=>{h("sendCode"),Y("sending");try{let s=await fetch("/api/outreach/accounts/send-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e})}),t=await s.json();s.ok?(l.ZP.success("Код отправлен в Telegram"),Y("code"),ee()):(l.ZP.error(t.error||"Ошибка отправки кода"),Y("add"))}catch(e){l.ZP.error("Ошибка соединения"),Y("add")}finally{h(null)}},el=async()=>{if(!U)return;let e=G.trim(),s=K.trim();if(!e&&"2fa"!==X){l.ZP.error("Введите код из Telegram");return}if("2fa"===X&&!s){l.ZP.error("Введите пароль 2FA");return}h("verify");try{let t=await fetch("/api/outreach/accounts/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:U.id,code:e,password:s||void 0})}),a=await t.json();if("2FA_REQUIRED"===a.error){Y("2fa"),(0,l.ZP)("Требуется пароль двухфакторной аутентификации"),ee();return}t.ok&&a.success?(l.ZP.success("Аккаунт успешно подключён! \uD83C\uDF89"),E(null),et(),ee()):l.ZP.error(a.error||"Ошибка верификации")}catch(e){l.ZP.error("Ошибка соединения")}finally{h(null)}},ei=async e=>{h(e);try{let s=await fetch("/api/outreach/accounts/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e})}),t=await s.json();t.connected?l.ZP.success(`Аккаунт активен${t.user?.username?` (@${t.user.username})`:""}`):l.ZP.error(t.error||"Аккаунт отключён"),ee()}catch(e){l.ZP.error("Ошибка проверки")}finally{h(null),V(null)}},en=async e=>{E(e),Y("add"),await er(e.id)},ec=async e=>{if(confirm("Удалить аккаунт? Это действие нельзя отменить.")){h(e);try{(await fetch("/api/outreach/accounts/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e})})).ok?(l.ZP.success("Аккаунт удалён"),ee()):l.ZP.error("Ошибка удаления")}catch(e){l.ZP.error("Ошибка соединения")}finally{h(null),V(null)}}},ed=(e,s)=>{navigator.clipboard.writeText(e),l.ZP.success(`${s} скопирован`)},eo=Math.ceil(t/20),ex=({field:e,children:s})=>(0,a.jsxs)("button",{onClick:()=>es(e),className:"flex items-center gap-1 hover:text-gray-900",children:[s,T===e?"desc"===q?a.jsx(m.Z,{className:"w-3 h-3"}):a.jsx(p.Z,{className:"w-3 h-3"}):a.jsx(u.Z,{className:"w-3 h-3 opacity-30"})]});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Telegram Аккаунты"}),a.jsx("p",{className:"text-gray-500",children:"Управление аккаунтами для аутрича"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:ee,disabled:c,className:"p-2 hover:bg-gray-100 rounded-lg",title:"Обновить",children:a.jsx(g.Z,{className:`w-5 h-5 text-gray-500 ${c?"animate-spin":""}`})}),(0,a.jsxs)("button",{onClick:()=>{z(!0),et()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[a.jsx(y.Z,{className:"w-4 h-4"}),"Добавить аккаунт"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:a.jsx(b.Z,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:t}),a.jsx("p",{className:"text-xs text-gray-500",children:"Всего аккаунтов"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:a.jsx(n,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:e.filter(e=>"connected"===e.status).length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Подключено"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-yellow-50",children:a.jsx(d.Z,{className:"w-5 h-5 text-yellow-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:e.filter(e=>["pending_verification","awaiting_code","awaiting_2fa"].includes(e.status)).length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Ожидают"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-purple-50",children:a.jsx(j.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:e.reduce((e,s)=>e+s.total_messages_sent,0)}),a.jsx("p",{className:"text-xs text-gray-500",children:"Сообщений"})]})]})})]}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,a.jsxs)("select",{value:S,onChange:e=>{A(e.target.value),F(1)},className:"px-3 py-2 border border-gray-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Все статусы"}),a.jsx("option",{value:"connected",children:"Подключён"}),a.jsx("option",{value:"disconnected",children:"Отключён"}),a.jsx("option",{value:"awaiting_code",children:"Ожидает код"}),a.jsx("option",{value:"awaiting_2fa",children:"Требуется 2FA"}),a.jsx("option",{value:"banned",children:"Заблокирован"})]}),S&&a.jsx("button",{onClick:()=>A(""),className:"text-sm text-gray-500 hover:text-gray-700",children:"Сбросить фильтр"})]})}),a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c&&0===e.length?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(f.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(b.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет аккаунтов"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Добавьте первый Telegram аккаунт для аутрича"}),(0,a.jsxs)("button",{onClick:()=>{z(!0),et()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(y.Z,{className:"w-4 h-4 inline mr-2"}),"Добавить аккаунт"]})]}):a.jsx("div",{className:"overflow-x-auto overflow-visible",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Аккаунт"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Статус"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a.jsx(ex,{field:"daily_messages_sent",children:"Лимит"})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a.jsx(ex,{field:"total_messages_sent",children:"Сообщений"})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a.jsx(ex,{field:"created_at",children:"Добавлен"})}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Действия"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:e.map(e=>{let s=C[e.status]||C.disconnected,t=s.icon,r=["awaiting_code","awaiting_2fa","pending_verification"].includes(e.status);return(0,a.jsxs)("tr",{className:`hover:bg-gray-50 ${r?"bg-yellow-50/50":""}`,children:[a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.bgColor}`,children:a.jsx(b.Z,{className:`w-5 h-5 ${s.color}`})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.name||e.phone}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx("span",{children:e.phone}),e.telegram_username&&(0,a.jsxs)("a",{href:`https://t.me/${e.telegram_username}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-1",children:["@",e.telegram_username,a.jsx(v.Z,{className:"w-3 h-3"})]})]})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${s.bgColor} ${s.color}`,children:[a.jsx(t,{className:"w-3.5 h-3.5"}),s.label]}),r&&a.jsx("button",{onClick:()=>{E(e),"awaiting_2fa"===e.status?Y("2fa"):"awaiting_code"===e.status?Y("code"):er(e.id)},className:"ml-2 text-xs text-blue-600 hover:underline",children:"Продолжить →"})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"w-32",children:a.jsx(M,{used:e.daily_messages_sent,limit:e.daily_limit})})}),a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.total_messages_sent}),(0,a.jsxs)("p",{className:"text-gray-500",children:[e.total_replies," ответов"]})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})}),a.jsx("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("button",{onClick:()=>V(L===e.id?null:e.id),className:"p-2 hover:bg-gray-100 rounded-lg",disabled:x===e.id,children:x===e.id?a.jsx(f.Z,{className:"w-5 h-5 animate-spin text-gray-500"}):a.jsx(N.Z,{className:"w-5 h-5 text-gray-500"})}),L===e.id&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>V(null)}),(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:["connected"===e.status&&(0,a.jsxs)("button",{onClick:()=>ei(e.id),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[a.jsx(g.Z,{className:"w-4 h-4"}),"Проверить соединение"]}),"connected"!==e.status&&(0,a.jsxs)("button",{onClick:()=>en(e),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[a.jsx(n,{className:"w-4 h-4"}),"Переподключить"]}),(0,a.jsxs)("button",{onClick:()=>ed(e.api_id,"API ID"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[a.jsx(w.Z,{className:"w-4 h-4"}),"Копировать API ID"]}),a.jsx("hr",{className:"my-1"}),(0,a.jsxs)("button",{onClick:()=>ec(e.id),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[a.jsx(k.Z,{className:"w-4 h-4"}),"Удалить"]})]})]})]})})]},e.id)})})]})})}),eo>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Показано ",(D-1)*20+1,"–",Math.min(20*D,t)," из ",t]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>F(e=>Math.max(1,e-1)),disabled:1===D,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Назад"}),(0,a.jsxs)("span",{className:"px-4 py-2 text-gray-600",children:[D," / ",eo]}),a.jsx("button",{onClick:()=>F(e=>Math.min(eo,e+1)),disabled:D===eo,className:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Вперёд"})]})]}),O&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Добавить Telegram аккаунт"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Название (необязательно)"}),a.jsx("input",{type:"text",value:J.name,onChange:e=>W({...J,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"Рабочий аккаунт"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Номер телефона *"}),a.jsx("input",{type:"text",value:J.phone,onChange:e=>W({...J,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"+79001234567"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"API ID *"}),a.jsx("input",{type:"text",value:J.api_id,onChange:e=>W({...J,api_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"12345678"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"API Hash *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"add"===R?"text":"password",value:J.api_hash,onChange:e=>W({...J,api_hash:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg font-mono text-sm pr-10",placeholder:"a1b2c3d4e5f6..."}),a.jsx("button",{type:"button",onClick:()=>H("add"===R?null:"add"),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:"add"===R?a.jsx(Z,{className:"w-4 h-4"}):a.jsx(_.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Дневной лимит сообщений"}),a.jsx("input",{type:"number",value:J.daily_limit,onChange:e=>W({...J,daily_limit:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",min:"1",max:"200"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Рекомендуется 30-50 для новых аккаунтов"})]}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(P,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Как получить API ID и Hash?"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-700",children:[(0,a.jsxs)("li",{children:["Перейдите на ",a.jsx("a",{href:"https://my.telegram.org",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"my.telegram.org"})]}),a.jsx("li",{children:"Войдите с номером телефона"}),a.jsx("li",{children:"Выберите \xabAPI development tools\xbb"}),a.jsx("li",{children:"Создайте приложение (любое название)"})]})]})]})}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:()=>{z(!1),et()},className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:"Отмена"}),a.jsx("button",{onClick:ea,disabled:"add"===x,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:"add"===x?(0,a.jsxs)(a.Fragment,{children:[a.jsx(f.Z,{className:"w-4 h-4 animate-spin"}),"Добавление..."]}):"Добавить и подключить"})]})]})]})}),U&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:["sending"===X&&"Отправка кода...","code"===X&&"Введите код из Telegram","2fa"===X&&"Двухфакторная аутентификация"]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["sending"===X&&"Подождите, отправляем код на ваш Telegram...","code"===X&&`Код отправлен на ${U.phone}`,"2fa"===X&&"Введите пароль двухфакторной аутентификации"]}),"sending"===X?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(f.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-4",children:["code"===X&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Код из Telegram"}),a.jsx("input",{type:"text",value:G,onChange:e=>B(e.target.value.replace(/\D/g,"").slice(0,5)),className:"w-full px-3 py-3 border border-gray-200 rounded-lg text-center text-2xl tracking-[0.5em] font-mono",placeholder:"12345",maxLength:5,autoFocus:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Код придёт в Telegram от официального аккаунта"})]}),"2fa"===X&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Пароль 2FA"}),a.jsx("input",{type:"password",value:K,onChange:e=>Q(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"Ваш пароль двухфакторной аутентификации",autoFocus:!0})]}),G&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Код из Telegram (если запрошен)"}),a.jsx("input",{type:"text",value:G,onChange:e=>B(e.target.value.replace(/\D/g,"").slice(0,5)),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-center tracking-widest",placeholder:"12345",maxLength:5})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{E(null),et()},className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50",children:"Отмена"}),a.jsx("button",{onClick:el,disabled:"verify"===x||"code"===X&&!G||"2fa"===X&&!K,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:"verify"===x?(0,a.jsxs)(a.Fragment,{children:[a.jsx(f.Z,{className:"w-4 h-4 animate-spin"}),"Проверка..."]}):"Подтвердить"})]}),"code"===X&&a.jsx("button",{onClick:()=>er(U.id),disabled:"sendCode"===x,className:"w-full text-sm text-blue-600 hover:underline disabled:opacity-50",children:"sendCode"===x?"Отправка...":"Отправить код повторно"})]})]})})]})}},8633:(e,s,t)=>{"use strict";t.d(s,{default:()=>f});var a=t(10326),r=t(90434),l=t(35047),i=t(24319),n=t(76464),c=t(24061),d=t(69436),o=t(53468),x=t(83495),h=t(94909),m=t(52679),p=t(74975),u=t(941),g=t(39183),y=t(17577);let b=[{name:"Дашборд",href:"/",icon:i.Z},{name:"Аналитика",href:"/analytics",icon:n.Z},{name:"Пользователи",href:"/users",icon:c.Z},{name:"Рассылки",href:"/broadcasts",icon:d.Z}],j=[{name:"Обзор",href:"/outreach",icon:o.Z},{name:"Аккаунты",href:"/outreach/accounts",icon:x.Z},{name:"Группы",href:"/outreach/groups",icon:h.Z},{name:"Кампании",href:"/outreach/campaigns",icon:m.Z},{name:"Лиды",href:"/outreach/leads",icon:p.Z}];function f(){let e=(0,l.usePathname)(),[s,t]=(0,y.useState)(e.startsWith("/outreach"));return(0,a.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col min-h-screen",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"MerchantAI"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Admin Panel"})]}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-1",children:[b.map(s=>{let t=e===s.href;return(0,a.jsxs)(r.default,{href:s.href,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${t?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(s.icon,{className:"w-5 h-5"}),s.name]},s.name)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>t(!s),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e.startsWith("/outreach")?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(o.Z,{className:"w-5 h-5"}),"Аутрич"]}),s?a.jsx(u.Z,{className:"w-4 h-4"}):a.jsx(g.Z,{className:"w-4 h-4"})]}),s&&a.jsx("div",{className:"ml-4 mt-1 space-y-1 border-l border-gray-200 pl-4",children:j.map(s=>{let t=e===s.href;return(0,a.jsxs)(r.default,{href:s.href,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${t?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(s.icon,{className:"w-4 h-4"}),s.name]},s.href)})})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsx("p",{className:"text-xs text-gray-400 text-center",children:"v2.0.0"})})]})}},25696:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},12969:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},79256:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},32933:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},48998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},43810:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7027:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},12714:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},75290:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},231:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},83855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},21405:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},98091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},69256:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,metadata:()=>c});var a=t(19510),r=t(68013),l=t.n(r);t(67272);var i=t(19125);let n=(0,t(68570).createProxy)(String.raw`/Users/leomishin/merchantai/admin/components/Sidebar.tsx#default`),c={title:"MerchantAI Admin",description:"Admin dashboard for MerchantAI Telegram Bot"};function d({children:e}){return a.jsx("html",{lang:"ru",children:(0,a.jsxs)("body",{className:l().className,children:[(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(n,{}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-8",children:e})})]}),a.jsx(i.x7,{position:"top-right"})]})})}},86355:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/leomishin/merchantai/admin/app/outreach/accounts/page.tsx#default`)},67272:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[9276,3138],()=>t(77828));module.exports=a})();