(()=>{var e={};e.id=814,e.ids=[814],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7828:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>d,routeModule:()=>m,tree:()=>o}),s(675),s(9256),s(5866);var r=s(3191),a=s(8716),l=s(7922),n=s.n(l),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["outreach",{children:["accounts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,675)),"/Users/leomishin/merchantai/admin/app/outreach/accounts/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9256)),"/Users/leomishin/merchantai/admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/leomishin/merchantai/admin/app/outreach/accounts/page.tsx"],h="/outreach/accounts/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/outreach/accounts/page",pathname:"/outreach/accounts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2009:(e,t,s)=>{Promise.resolve().then(s.bind(s,2495)),Promise.resolve().then(s.t.bind(s,9404,23))},791:(e,t,s)=>{Promise.resolve().then(s.bind(s,3842)),Promise.resolve().then(s.bind(s,381))},2460:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},2495:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(326),a=s(7577),l=s(5047),n=s(381),i=s(231);let c=(0,s(6557).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=s(8091);function d({account:e}){let t=(0,l.useRouter)(),[s,d]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!1),m=async()=>{x(!0);try{(await fetch("/api/outreach/accounts/reconnect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e.id})})).ok?(n.ZP.success("Переподключение запущено"),t.refresh()):n.ZP.error("Ошибка")}catch(e){n.ZP.error("Ошибка")}finally{x(!1),d(!1)}},p=async()=>{if(confirm(`Удалить аккаунт ${e.name||e.phone}?`)){x(!0);try{(await fetch("/api/outreach/accounts/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:e.id})})).ok?(n.ZP.success("Аккаунт удалён"),t.refresh()):n.ZP.error("Ошибка")}catch(e){n.ZP.error("Ошибка")}finally{x(!1),d(!1)}}};return(0,r.jsxs)("div",{className:"relative",children:[r.jsx("button",{onClick:()=>d(!s),className:"p-2 hover:bg-gray-100 rounded-lg",disabled:h,children:r.jsx(i.Z,{className:"w-5 h-5 text-gray-500"})}),s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:[(0,r.jsxs)("button",{onClick:m,className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(c,{className:"w-4 h-4"}),"Переподключить"]}),r.jsx("hr",{className:"my-1"}),(0,r.jsxs)("button",{onClick:p,className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[r.jsx(o.Z,{className:"w-4 h-4"}),"Удалить"]})]})]})]})}},3842:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var r=s(326),a=s(434),l=s(5047),n=s(1135),i=s(1009),c=s(4319),o=s(4061),d=s(9436),h=s(3468),x=s(4975),m=s(617),p=s(8378);let u=[{name:"Дашборд",href:"/",icon:c.Z},{name:"Пользователи",href:"/users",icon:o.Z},{name:"Рассылки",href:"/broadcasts",icon:d.Z},{name:"Аутрич",href:"/outreach",icon:h.Z},{name:"Лиды",href:"/outreach/leads",icon:x.Z},{name:"Группы",href:"/outreach/groups",icon:m.Z}];function y(){let e=(0,l.usePathname)();return(0,r.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"MerchantAI"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Admin Panel"})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-1",children:u.map(t=>{let s=e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,r.jsxs)(a.default,{href:t.href,className:function(...e){return(0,i.m6)((0,n.W)(e))}("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",s?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[r.jsx(t.icon,{className:"w-5 h-5"}),t.name]},t.name)})}),r.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)(a.default,{href:"/settings",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[r.jsx(p.Z,{className:"w-5 h-5"}),"Настройки"]})})]})}},231:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},8091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>c});var r=s(9510),a=s(8013),l=s.n(a);s(7272);var n=s(9125);let i=(0,s(8570).createProxy)(String.raw`/Users/leomishin/merchantai/admin/components/Sidebar.tsx#default`),c={title:"MerchantAI Admin",description:"Admin dashboard for MerchantAI Telegram Bot"};function o({children:e}){return r.jsx("html",{lang:"ru",children:(0,r.jsxs)("body",{className:l().className,children:[(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[r.jsx(i,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsx("div",{className:"p-8",children:e})})]}),r.jsx(n.x7,{position:"top-right"})]})})}},675:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(9510),a=s(5662),l=s(7371),n=s(6478);let i=(0,n.Z)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),c=(0,n.Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),o=(0,n.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var d=s(4126);let h=(0,n.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),x=(0,s(8570).createProxy)(String.raw`/Users/leomishin/merchantai/admin/app/outreach/accounts/AccountActions.tsx#default`);async function m(){let{data:e}=await a.p.from("outreach_accounts").select("*").order("created_at",{ascending:!1});return e||[]}let p={connected:{label:"Подключён",icon:i,color:"text-green-600 bg-green-100"},disconnected:{label:"Отключён",icon:c,color:"text-gray-600 bg-gray-100"},banned:{label:"Забанен",icon:o,color:"text-red-600 bg-red-100"},limited:{label:"Лимит",icon:o,color:"text-yellow-600 bg-yellow-100"}};async function u(){let e=await m();return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Telegram аккаунты"}),r.jsx("p",{className:"text-gray-500",children:"Аккаунты для аутрича"})]}),(0,r.jsxs)(l.default,{href:"/outreach/accounts/new",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(d.Z,{className:"w-4 h-4"}),"Добавить аккаунт"]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:0===e.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[r.jsx(h,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет аккаунтов"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Добавьте Telegram аккаунты для аутрича"}),(0,r.jsxs)(l.default,{href:"/outreach/accounts/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[r.jsx(d.Z,{className:"w-4 h-4"}),"Добавить аккаунт"]})]}):(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Аккаунт"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Статус"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Сегодня"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Всего"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ответов"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Действия"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:e.map(e=>{let t=p[e.status],s=t?.icon||c;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(h,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.name||e.phone}),r.jsx("p",{className:"text-sm text-gray-500",children:e.phone})]})]})}),r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${t?.color||"bg-gray-100"}`,children:[r.jsx(s,{className:"w-4 h-4"}),t?.label||e.status]})}),r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("span",{className:"text-gray-900",children:[e.daily_messages_sent," / ",e.daily_limit]})}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:e.total_messages_sent}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:e.total_replies}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx(x,{account:e})})]},e.id)})})]})}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Как получить API ID и Hash?"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-800 space-y-1",children:[(0,r.jsxs)("li",{children:["Перейдите на ",r.jsx("a",{href:"https://my.telegram.org",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"my.telegram.org"})]}),r.jsx("li",{children:"Войдите с номером телефона"}),r.jsx("li",{children:'Выберите "API development tools"'}),r.jsx("li",{children:"Создайте приложение (название любое)"}),r.jsx("li",{children:"Скопируйте App api_id и App api_hash"})]})]})]})}},5662:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});let r=(0,s(7857).eI)("https://lfeqwqcbhjkedclxihlw.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})},6478:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(1159),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,...h},x)=>(0,r.createElement)("svg",{ref:x,...a,width:n,height:n,stroke:s,strokeWidth:c?24*Number(i)/Number(n):i,className:["lucide",`lucide-${l(e)}`,o].join(" "),...h},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return s.displayName=`${e}`,s}},4126:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6478).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7371:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(1812),a=s.n(r)},1812:(e,t,s)=>{"use strict";let{createProxy:r}=s(8570);e.exports=r("/Users/leomishin/merchantai/admin/node_modules/next/dist/client/link.js")},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,857,223],()=>s(7828));module.exports=r})();