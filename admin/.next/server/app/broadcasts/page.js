(()=>{var e={};e.id=267,e.ids=[267],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7757:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d}),s(214),s(9256),s(5866);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["broadcasts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,214)),"/Users/leomishin/merchantai/admin/app/broadcasts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9256)),"/Users/leomishin/merchantai/admin/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/leomishin/merchantai/admin/app/broadcasts/page.tsx"],m="/broadcasts/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/broadcasts/page",pathname:"/broadcasts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},791:(e,t,s)=>{Promise.resolve().then(s.bind(s,3842)),Promise.resolve().then(s.bind(s,381))},2460:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},2883:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},3842:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var r=s(326),a=s(434),n=s(5047),l=s(1135),i=s(1009),c=s(4319),d=s(4061),o=s(9436),m=s(3468),x=s(4975),h=s(617),p=s(8378);let u=[{name:"Дашборд",href:"/",icon:c.Z},{name:"Пользователи",href:"/users",icon:d.Z},{name:"Рассылки",href:"/broadcasts",icon:o.Z},{name:"Аутрич",href:"/outreach",icon:m.Z},{name:"Лиды",href:"/outreach/leads",icon:x.Z},{name:"Группы",href:"/outreach/groups",icon:h.Z}];function g(){let e=(0,n.usePathname)();return(0,r.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"MerchantAI"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Admin Panel"})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-1",children:u.map(t=>{let s=e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,r.jsxs)(a.default,{href:t.href,className:function(...e){return(0,i.m6)((0,l.W)(e))}("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",s?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[r.jsx(t.icon,{className:"w-5 h-5"}),t.name]},t.name)})}),r.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)(a.default,{href:"/settings",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[r.jsx(p.Z,{className:"w-5 h-5"}),"Настройки"]})})]})}},214:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(9510),a=s(5662),n=s(650),l=s(7371),i=s(6478);let c=(0,i.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var d=s(1741);let o=(0,i.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),m=(0,i.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var x=s(4126);async function h(){let{data:e,error:t}=await a.p.from("broadcasts").select("*").order("created_at",{ascending:!1}).limit(50);return e||[]}let p={draft:{label:"Черновик",icon:c,color:"text-gray-500 bg-gray-100"},scheduled:{label:"Запланировано",icon:c,color:"text-blue-500 bg-blue-100"},sending:{label:"Отправка",icon:d.Z,color:"text-yellow-500 bg-yellow-100"},completed:{label:"Завершено",icon:o,color:"text-green-500 bg-green-100"},failed:{label:"Ошибка",icon:m,color:"text-red-500 bg-red-100"}};async function u(){let e=await h();return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Рассылки"}),r.jsx("p",{className:"text-gray-500",children:"Управление массовыми сообщениями"})]}),(0,r.jsxs)(l.default,{href:"/broadcasts/new",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(x.Z,{className:"w-4 h-4"}),"Новая рассылка"]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:0===e.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[r.jsx(d.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет рассылок"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Создайте первую рассылку для ваших пользователей"}),(0,r.jsxs)(l.default,{href:"/broadcasts/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[r.jsx(x.Z,{className:"w-4 h-4"}),"Создать рассылку"]})]}):(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Название"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Статус"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Аудитория"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Отправлено"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Дата"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:e.map(e=>{let t=p[e.status],s=t.icon;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.title||"Без названия"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:[e.message.substring(0,50),"..."]})]}),r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${t.color}`,children:[r.jsx(s,{className:"w-4 h-4"}),t.label]})}),(0,r.jsxs)("td",{className:"px-6 py-4 text-gray-600",children:["all"===e.target_type&&"Все пользователи","segment"===e.target_type&&`Теги: ${e.target_tags?.join(", ")}`,"specific"===e.target_type&&`${e.target_user_ids?.length} получателей`]}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:[e.sent_count," / ",e.total_recipients]}),e.failed_count>0&&(0,r.jsxs)("span",{className:"text-red-500 ml-2",children:["(",e.failed_count," ошибок)"]})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:(0,n.p6)(e.created_at)})]},e.id)})})]})})]})}},9256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>c});var r=s(9510),a=s(8013),n=s.n(a);s(7272);var l=s(9125);let i=(0,s(8570).createProxy)(String.raw`/Users/leomishin/merchantai/admin/components/Sidebar.tsx#default`),c={title:"MerchantAI Admin",description:"Admin dashboard for MerchantAI Telegram Bot"};function d({children:e}){return r.jsx("html",{lang:"ru",children:(0,r.jsxs)("body",{className:n().className,children:[(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[r.jsx(i,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsx("div",{className:"p-8",children:e})})]}),r.jsx(l.x7,{position:"top-right"})]})})}},5662:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});let r=(0,s(7857).eI)("https://lfeqwqcbhjkedclxihlw.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})},650:(e,t,s)=>{"use strict";s.d(t,{SY:()=>i,p6:()=>l,uf:()=>d,xG:()=>c});var r=s(3597),a=s(4269),n=s(6611);function l(e){return(0,r.Z)(new Date(e),"dd.MM.yyyy HH:mm",{locale:n.Z})}function i(e){return(0,a.Z)(new Date(e),{addSuffix:!0,locale:n.Z})}function c(e,t="RUB"){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function d(e){return new Intl.NumberFormat("ru-RU").format(e)}},4126:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6478).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1741:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6478).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},7371:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(1812),a=s.n(r)},1812:(e,t,s)=>{"use strict";let{createProxy:r}=s(8570);e.exports=r("/Users/leomishin/merchantai/admin/node_modules/next/dist/client/link.js")},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,857,223,377],()=>s(7757));module.exports=r})();