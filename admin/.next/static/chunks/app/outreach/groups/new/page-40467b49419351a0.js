(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{7608:function(e,t,r){Promise.resolve().then(r.bind(r,3776))},3776:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(7437),l=r(2265),a=r(9376),n=r(9064),o=r(7648),i=r(2660),c=r(9397);let u=(0,r(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function d(){let e=(0,a.useRouter)(),[t,r]=(0,l.useState)(!1),[d,m]=(0,l.useState)("single"),[x,b]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[y,g]=(0,l.useState)(""),[f,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(""),w=async()=>{if(!x.trim()){n.ZP.error("Введите название группы");return}r(!0);try{let t=await fetch("/api/outreach/groups/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x,username:h||null,category:y||null,member_count:f?parseInt(f):null})});if(t.ok)n.ZP.success("Группа добавлена"),e.push("/outreach/groups");else{let e=await t.json();n.ZP.error(e.error||"Ошибка")}}catch(e){n.ZP.error("Ошибка")}finally{r(!1)}},k=async()=>{if(!v.trim()){n.ZP.error("Введите данные для импорта");return}r(!0);try{let t=v.trim().split("\n").map(e=>{let t=e.split("|").map(e=>e.trim());return{title:t[0]||"Без названия",username:t[1]||null,category:t[2]||null,member_count:t[3]?parseInt(t[3]):null}}),r=await fetch("/api/outreach/groups/bulk-create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:t})});if(r.ok){let t=await r.json();n.ZP.success("Добавлено ".concat(t.count," групп")),e.push("/outreach/groups")}else{let e=await r.json();n.ZP.error(e.error||"Ошибка")}}catch(e){n.ZP.error("Ошибка")}finally{r(!1)}};return(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)(o.default,{href:"/outreach/groups",className:"inline-flex items-center gap-2 text-gray-500 hover:text-gray-700 mb-4",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Назад к группам"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Добавить группы"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 mb-6",children:[(0,s.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,s.jsx)("button",{onClick:()=>m("single"),className:"flex-1 px-4 py-3 text-sm font-medium ".concat("single"===d?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),children:"Одна группа"}),(0,s.jsx)("button",{onClick:()=>m("bulk"),className:"flex-1 px-4 py-3 text-sm font-medium ".concat("bulk"===d?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),children:"Массовый импорт"})]}),(0,s.jsx)("div",{className:"p-6",children:"single"===d?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Название группы *"}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"WB Дизайнеры"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Username (без @)"}),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"wb_designers"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Категория"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"wb_designers, freelancers, etc."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Количество участников"}),(0,s.jsx)("input",{type:"number",value:f,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg",placeholder:"5000"})]}),(0,s.jsxs)("button",{onClick:w,disabled:t||!x.trim(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),t?"Добавление...":"Добавить группу"]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Данные для импорта"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Формат: название|username|категория|участников (по одной группе на строку)"}),(0,s.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),rows:10,className:"w-full px-3 py-2 border border-gray-200 rounded-lg font-mono text-sm",placeholder:"WB Дизайнеры|wb_designers|wb_designers|5000\nФриланс Биржа|freelance_birja|freelancers|12000\nУдалённая работа|remote_job|jobs|8000"})]}),(0,s.jsxs)("button",{onClick:k,disabled:t||!v.trim(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,s.jsx)(u,{className:"w-4 h-4"}),t?"Импорт...":"Импортировать группы"]})]})})]})]})}},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return l.a}});var s=r(2972),l=r.n(s)}},function(e){e.O(0,[972,952,971,117,744],function(){return e(e.s=7608)}),_N_E=e.O()}]);